!function(){"use strict";var n=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),e=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},r=function(){function e(t,r,i,u){n(this,e),this.name=t,this.fn=r,this.args=i,this.modifiers=u}return t(e,[{key:"_test",value:function(n){var t=this.fn;try{u(this.modifiers.slice(),t)(n)}catch(n){t=function(){return!1}}try{return u(this.modifiers.slice(),t)(n)}catch(n){return!1}}},{key:"_check",value:function(n){try{u(this.modifiers.slice(),this.fn)(n)}catch(n){if(u(this.modifiers.slice(),(function(n){return n}))(!1))return}if(!u(this.modifiers.slice(),this.fn)(n))throw null}},{key:"_testAsync",value:function(n){var t=this;return new Promise((function(e,r){o(t.modifiers.slice(),t.fn)(n).then((function(t){t?e(n):r(null)})).catch((function(n){return r(n)}))}))}}]),e}();function i(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simple";return"object"==typeof n?n[t]:n}function u(n,t){if(n.length){var e=n.shift(),r=u(n,t);return e.perform(r)}return i(t)}function o(n,t){if(n.length){var e=n.shift(),r=o(n,t);return e.performAsync(r)}return function(n){return Promise.resolve(i(t,"async")(n))}}var c=function t(e,r,i){n(this,t),this.name=e,this.perform=r,this.performAsync=i},s=function(t){function r(t,i,u,o){n(this,r);for(var c=arguments.length,s=Array(c>4?c-4:0),a=4;a<c;a++)s[a-4]=arguments[a];var f=e(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,s));return Error.captureStackTrace&&Error.captureStackTrace(f,r),f.rule=t,f.value=i,f.cause=u,f.target=o,f}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(r,Error),r}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n(this,e),this.chain=t,this.nextRuleModifiers=r}return t(e,[{key:"_applyRule",value:function(n,t){var e=this;return function(){for(var i=arguments.length,u=Array(i),o=0;o<i;o++)u[o]=arguments[o];return e.chain.push(new r(t,n.apply(e,u),u,e.nextRuleModifiers)),e.nextRuleModifiers=[],e}}},{key:"_applyModifier",value:function(n,t){return this.nextRuleModifiers.push(new c(t,n.simple,n.async)),this}},{key:"_clone",value:function(){return new e(this.chain.slice(),this.nextRuleModifiers.slice())}},{key:"test",value:function(n){return this.chain.every((function(t){return t._test(n)}))}},{key:"testAll",value:function(n){var t=[];return this.chain.forEach((function(e){try{e._check(n)}catch(r){t.push(new s(e,n,r))}})),t}},{key:"check",value:function(n){this.chain.forEach((function(t){try{t._check(n)}catch(e){throw new s(t,n,e)}}))}},{key:"testAsync",value:function(n){var t=this;return new Promise((function(e,r){f(n,t.chain.slice(),e,r)}))}}]),e}();function f(n,t,e,r){if(t.length){var i=t.shift();i._testAsync(n).then((function(){f(n,t,e,r)}),(function(t){r(new s(i,n,t))}))}else e(n)}function l(){return p(new a)}var h={};function p(n){return new Proxy(n,{get:function(t,e){if(e in t)return t[e];var r=p(n._clone());return e in y?r._applyModifier(y[e],e):e in h?r._applyRule(h[e],e):e in g?r._applyRule(g[e],e):void 0}})}l.extend=function(n){Object.assign(h,n)},l.clearCustomRules=function(){h={}};var y={not:{simple:function(n){return function(t){return!n(t)}},async:function(n){return function(t){return Promise.resolve(n(t)).then((function(n){return!n})).catch((function(n){return!0}))}}},some:{simple:function(n){return function(t){return m(t).some((function(t){try{return n(t)}catch(n){return!1}}))}},async:function(n){return function(t){return Promise.all(m(t).map((function(t){try{return n(t).catch((function(n){return!1}))}catch(n){return!1}}))).then((function(n){return n.some(Boolean)}))}}},every:{simple:function(n){return function(t){return m(t).every(n)}},async:function(n){return function(t){return Promise.all(m(t).map(n)).then((function(n){return n.every(Boolean)}))}}}};function m(n){return"string"==typeof n?n.split(""):n}var g={equal:function(n){return function(t){return t==n}},exact:function(n){return function(t){return t===n}},number:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return"number"==typeof t&&(n||isFinite(t))}},integer:function(){return function(n){return(Number.isInteger||v)(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return d("string")},boolean:function(){return d("boolean")},undefined:function(){return d("undefined")},null:function(){return d("null")},array:function(){return d("array")},object:function(){return d("object")},instanceOf:function(n){return function(t){return t instanceof n}},pattern:function(n){return function(t){return n.test(t)}},lowercase:function(){return function(n){return/^([a-z]+\s*)+$/.test(n)}},uppercase:function(){return function(n){return/^([A-Z]+\s*)+$/.test(n)}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(t){return t[0]==n}},last:function(n){return function(t){return t[t.length-1]==n}},empty:function(){return function(n){return 0===n.length}},length:function(n,t){return function(e){return e.length>=n&&e.length<=(t||n)}},minLength:function(n){return function(t){return t.length>=n}},maxLength:function(n){return function(t){return t.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,t){return function(e){return e>=n&&e<=t}},range:function(n,t){return function(e){return e>=n&&e<=t}},lessThan:function(n){return function(t){return t<n}},lessThanOrEqual:function(n){return function(t){return t<=n}},greaterThan:function(n){return function(t){return t>n}},greaterThanOrEqual:function(n){return function(t){return t>=n}},even:function(){return function(n){return n%2==0}},odd:function(){return function(n){return n%2!=0}},includes:function(n){return function(t){return~t.indexOf(n)}},schema:function(n){return t=n,{simple:function(n){var e=[];if(Object.keys(t).forEach((function(r){var i=t[r];try{i.check((n||{})[r])}catch(n){n.target=r,e.push(n)}})),e.length>0)throw e;return!0},async:function(n){var e=[],r=Object.keys(t).map((function(r){return t[r].testAsync((n||{})[r]).catch((function(n){n.target=r,e.push(n)}))}));return Promise.all(r).then((function(n){if(e.length>0)throw e;return!0}))}};var t},passesAnyOf:function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(n){return t.some((function(t){return t.test(n)}))}},optional:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return t&&"string"==typeof e&&""===e.trim()||null!=e&&n.check(e),!0}}};function d(n){return function(t){return Array.isArray(t)&&"array"===n||null===t&&"null"===n||typeof t===n}}function v(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}var w=l;w().string().length(0,0);const b=w().numeric().integer();b.greaterThanOrEqual(1),b.greaterThanOrEqual(0);var _=class{constructor(){}get isBlank(){return w().string().empty()}get isNotBlank(){return w().string().minLength(1)}get commonRule(){return w().numeric().integer().positive()}get isPosiInt(){return this.commonRule.greaterThanOrEqual(1)}get isPosiIntAnd0(){return this.commonRule}get isNumericStr(){return w().string().pattern(/\d+/)}hasMapKeys(n,t){if(n instanceof Map&&Array.isArray(t))return t.every((t=>n.has(t)));throw new TypeError("引数がMapとArrayでない")}isValuesPosiInt(n){return Array.from(n.values()).every((n=>this.isPosiIntAnd0.test(n)))}};const E=new _;const k=new _,I=new class{parseInput(n){if(E.isNumericStr.test(n))return parseInt(n,10);throw new Error("引数が数値で構成された文字列でない")}allowBlank(n){return E.isBlank.test(n)?null:this.parseInput(n)}};const M=new _;var P=function(n){return(new DOMParser).parseFromString(n,"text/html").body.firstElementChild};new class{constructor(){const n=document.getElementById("js-error");document.getElementById("js-form").addEventListener("submit",(t=>{try{for(t.preventDefault(),n.classList.add("error--invisible");n.firstChild;)n.removeChild(n.firstChild);const e=function(n){if(n instanceof Map&&(3===n.size||4===n.size)&&M.hasMapKeys(n,["span","goal","total"])&&M.isValuesPosiInt(n)){const t=n.get("goal")-n.get("total"),e=Math.ceil(t/n.get("span")),r=new Map([["remain",t],["dailyGoal",e]]);if(4===n.size){const t=Math.ceil(e/n.get("approx")),i=Math.ceil(t/n.get("span"));r.set("remainBattle",t),r.set("dailyBattle",i)}return r}throw n instanceof Map?3!==n.size||4!==n.size?new RangeError("Map.sizeが3か4でない"):new Error("何かがダメ"):new TypeError("引数がMapでない")}(new class{constructor(){const n=new class{constructor(){const n=["span","goal","total","approx"],t=new Map;for(const e of n)k.isNotBlank.test(document.getElementById(`js-input_${e}`).value)&&t.set(e,I.parseInput(document.getElementById(`js-input_${e}`).value));return t}};if(function(n){let t="";switch(n.size){case 3:t=k.isPosiInt.test(n.get("span"))&&k.isPosiInt.test(n.get("goal"))&&k.isPosiIntAnd0.test(n.get("total"));break;case 4:t=k.isPosiInt.test(n.get("span"))&&k.isPosiInt.test(n.get("goal"))&&k.isPosiIntAnd0.test(n.get("total"))&&k.isPosiInt.test(n.get("approx"));break;default:throw new RangeError("Map.sizeは3か4でなければならない")}return t}(n))return n;throw new Error("入力内容が正しくない")}});new class{constructor(n){if(!(n instanceof Map)||2!==n.size&&4!==n.size)throw new Error("引数はMap、かつsizeが2か4でなければならない");{const t=["remain","dailyGoal"];for(const e of t)document.getElementById(`js-output_${e}`).textContent=n.get(e).toLocaleString();if(4===n.size){const t=["remainBattle","dailyBattle"];for(const e of t)document.getElementById(`js-output_${e}`).textContent=n.get(e).toLocaleString()}const e=document.getElementById("js-table");e.classList.remove("table--invisible","animate__animated","animate__fadeIn"),e.classList.add("animate__animated","animate__fadeIn")}}}(e)}catch(t){console.error(t),n.classList.remove("error--invisible"),n.appendChild(P('<h1 class="error__title">！エラーが発生しました。</h1>')),n.appendChild(P("<p>入力内容を確認してください。<br>半角数字のみ入力できます。</p>"))}}))}}}();